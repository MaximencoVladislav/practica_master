generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ----------------------------------------------------
// НОВАЯ МОДЕЛЬ РОЛЕЙ для динамического управления
model Role {
  id      Int      @id @default(autoincrement())
  name    String   @unique // Название роли: ADMIN, USER, EDITOR, MODERATOR
  users   User[] // Связь с пользователями
}
// ----------------------------------------------------

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  name      String?
  // ----------------------------------------------------
  // ИСПОЛЬЗОВАНИЕ СВЯЗИ С НОВОЙ МОДЕЛЬЮ (roleName вместо role)
  roleName  String   @default("USER") // Поле для хранения имени роли
  role      Role     @relation(fields: [roleName], references: [name], onUpdate: Cascade) // Связь
  // ----------------------------------------------------
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}